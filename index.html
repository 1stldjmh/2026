<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>2026å¿«ä¹ ğŸ‰</title>

<style>
* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
    font-family: "Microsoft YaHei", Arial, sans-serif;
}

body {
    height: 100vh;
    overflow: hidden;
    background: radial-gradient(circle at bottom, #1b2735, #090a0f);
    color: #fff;
}

canvas {
    position: fixed;
    top: 0;
    left: 0;
    z-index: 1;
}

.container {
    position: relative;
    z-index: 2;
    height: 100vh;
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 20px;
}

.card {
    width: 100%;
    max-width: 380px;
    background: rgba(255,255,255,0.15);
    backdrop-filter: blur(10px);
    padding: 35px 25px;
    border-radius: 24px;
    text-align: center;
    box-shadow: 0 0 40px rgba(255,200,150,0.35);
    animation: fadeIn 1.5s ease;
}


h1 {
    font-size: min(16vw, 90px);
    color: #ffd479;
    text-shadow: 0 0 20px rgba(255,212,121,0.9);
}

h2 {
    font-size: 7vw;
    margin: 12px 0 20px;
}

input {
    width: 100%;
    padding: 14px;
    font-size: 16px;
    border-radius: 24px;
    border: none;
    outline: none;
    text-align: center;
    margin-bottom: 16px;
}

button {
    width: 100%;
    padding: 14px;
    font-size: 20px;
    border-radius: 30px;
    border: none;
    background: linear-gradient(135deg,#ffb347,#ffcc33);
    color: #333;
    box-shadow: 0 8px 20px rgba(255,180,80,0.5);
}

/* å¼¹çª— */
.popup {
    position: fixed;
    padding: 22px 26px;
    border-radius: 26px;
    font-size: 20px;
    font-weight: bold;
    color: #fff;
    z-index: 3;
    animation: popIn .4s ease;
    max-width: 90vw;
    text-align: center;
    user-select: none;
    cursor: pointer;
}

@keyframes popIn {
    from { transform: scale(0); }
    to { transform: scale(1); }
}

/* çˆ±å¿ƒé›¨ */
.heart {
    position: fixed;
    top: -20px;
    font-size: 22px;
    animation: fall linear forwards;
    z-index: 2;
}

@keyframes fall {
    to {
        transform: translateY(110vh);
        opacity: 0;
    }
}

/* è‡ªè½¬å›¾ç‰‡å½©è›‹ */
.spin-img {
    position: fixed;
    top: 50%;
    left: 50%;
    width: 220px;
    height: 220px;
    transform: translate(-50%, -50%);
    border-radius: 20px;
    z-index: 4;
    box-shadow:
        0 0 30px rgba(255,255,255,0.9),
        0 0 80px rgba(255,100,100,0.9);
    animation: spin 3s linear infinite, pulse 2s ease-in-out infinite;
}

@keyframes spin {
    from { transform: translate(-50%, -50%) rotate(0deg); }
    to   { transform: translate(-50%, -50%) rotate(360deg); }
}

@keyframes pulse {
    0%,100% { scale: 1; }
    50% { scale: 1.12; }
}

@keyframes fadeIn {
    from { opacity: 0; transform: translateY(40px); }
    to { opacity: 1; transform: translateY(0); }
}
</style>
</head>

<body>

<canvas id="fireworks"></canvas>

<div class="container">
    <div class="card" id="startCard">
        <h1>2026</h1>
        <h2>å…ƒæ—¦å¿«ä¹ ğŸ‰</h2>
        <input id="nameInput" placeholder="what's your name?">
        <button onclick="start()">enter ğŸ’¥</button>
    </div>
</div>

<audio id="bgm" preload="auto" loop playsinline webkit-playsinline>
    <source src="bgm.mp3" type="audio/mpeg">
</audio>

<script>
/* ================= åå­— â†’ å›¾ç‰‡ ================= */
const nameImageMap = {
    "stl": "1.jpg",
    "å¥½å…„å¼Ÿ": "2.jpg",
    "å¸…å“¥": "3.jpg",
    "ç”œå¦¹": "4.jpg",
    "æ²ˆä¸‡é”¦": "5.jpg"
};
// å›ºå®šæ›¿ä»£å›¾ç‰‡ï¼ˆç»ˆæ€ï¼‰
const FINAL_SPIN_IMAGE = "final.jpg";


/* ================= çƒŸèŠ± ================= */
const canvas = document.getElementById("fireworks");
const ctx = canvas.getContext("2d");
canvas.width = innerWidth;
canvas.height = innerHeight;
onresize = () => {
    canvas.width = innerWidth;
    canvas.height = innerHeight;
};

let fireworks = [];

function boom(x,y){
    let ps=[];
    const n = innerWidth < 768 ? 45 : 80;
    for(let i=0;i<n;i++){
        ps.push({
            x,y,
            a:Math.random()*Math.PI*2,
            s:Math.random()*6+2,
            l:50,
            c:`hsl(${Math.random()*360},100%,60%)`
        });
    }
    fireworks.push(ps);
}

function animate(){
    ctx.clearRect(0,0,canvas.width,canvas.height);
    fireworks.forEach((ps,i)=>{
        ps.forEach(p=>{
            p.x+=Math.cos(p.a)*p.s;
            p.y+=Math.sin(p.a)*p.s;
            p.l--;
            ctx.fillStyle=p.c;
            ctx.beginPath();
            ctx.arc(p.x,p.y,2,0,Math.PI*2);
            ctx.fill();
        });
        fireworks[i]=ps.filter(p=>p.l>0);
    });
    fireworks=fireworks.filter(ps=>ps.length);
    requestAnimationFrame(animate);
}
animate();

/* ================= æ¼‚æµ®å¼¹çª—ç³»ç»Ÿ ================= */
const texts = [
    "æ–°çš„ä¸€å¹´ ä¸‡äº‹é¡ºæ„ ğŸŒŸ",
    "å¥½è¿æ­£åœ¨å¥”å‘ä½  ğŸ€",
    "æ¯å¤©éƒ½è¦å¼€å¿ƒå‘€ ğŸ˜Š",
    "æ„¿ä½ è¢«ä¸–ç•Œæ¸©æŸ”ä»¥å¾… âœ¨",
    "çƒ¦æ¼é€€é€€é€€ ğŸš«",
    "å¿«ä¹æ‹‰æ»¡ ğŸ’¯",
    "å¹³å®‰å¥åº· â¤ï¸",
    "å¿ƒæƒ³äº‹æˆ ğŸŒˆ"
];

const popups = [];

function popup(name){
    const d = document.createElement("div");
    d.className = "popup";
    d.innerText = (name ? name + "ï¼Œ" : "") +
        texts[Math.floor(Math.random()*texts.length)];
    d.style.background = `hsl(${Math.random()*360},80%,60%)`;

    // åˆå§‹ä½ç½®
    let x = Math.random() * (innerWidth - 200);
    let y = Math.random() * (innerHeight - 200);

    // éšæœºé€Ÿåº¦
    let vx = (Math.random()*2 + 1) * (Math.random()<0.5 ? -1 : 1)*0.2;
    let vy = (Math.random()*2 + 1) * (Math.random()<0.5 ? -1 : 1)*0.2;

    d.onclick = () => {
        boom(x + d.offsetWidth/2, y + d.offsetHeight/2);
        d.remove();
        popups.splice(popups.indexOf(obj),1);
		popup(name);
    };

    document.body.appendChild(d);

    const obj = { el:d, x,y,vx,vy };
    popups.push(obj);
}

/* å¼¹çª—è¿åŠ¨ */
function movePopups(){
    popups.forEach(p=>{
        p.x += p.vx;
        p.y += p.vy;

        if(p.x <= 0 || p.x + p.el.offsetWidth >= innerWidth) p.vx *= -1;
        if(p.y <= 0 || p.y + p.el.offsetHeight >= innerHeight) p.vy *= -1;

        p.el.style.left = p.x + "px";
        p.el.style.top  = p.y + "px";
    });
    requestAnimationFrame(movePopups);
}
movePopups();

/* ================= çˆ±å¿ƒé›¨ ================= */
function heartRain(){
    const h=document.createElement("div");
    h.className="heart";
    h.innerText="ğŸ’–";
    h.style.left=Math.random()*100+"vw";
    h.style.animationDuration=3+Math.random()*3+"s";
    document.body.appendChild(h);
    setTimeout(()=>h.remove(),6000);
}

/* ================= è‡ªè½¬å›¾ç‰‡ ================= */
function showSpinImage(src){
    // ä¿è¯é¡µé¢ä¸Šåªæœ‰ä¸€å¼ 
    const old = document.querySelector(".spin-img");
    if (old) old.remove();

    const img = document.createElement("img");
    img.src = src;
    img.className = "spin-img";

    img.onclick = () => {
        // æ”¾çƒŸèŠ±
        boom(innerWidth/2, innerHeight/2);

        // å¦‚æœå·²ç»æ˜¯ç»ˆæ€å›¾ç‰‡ï¼Œå°±ä¸å†æ›¿æ¢
        if (src === FINAL_SPIN_IMAGE) return;

        // åˆ é™¤å½“å‰å›¾ç‰‡
        img.remove();

        // ç”Ÿæˆå›ºå®šçš„ç»ˆæ€å›¾ç‰‡
        showSpinImage(FINAL_SPIN_IMAGE);
    };

    document.body.appendChild(img);
}


/* ================= å¼€å§‹ ================= */
function start(){
    const name=document.getElementById("nameInput").value || "æœ‹å‹";
    document.getElementById("startCard").remove();

    const bgm=document.getElementById("bgm");
    setTimeout(()=>{
        bgm.volume=0.6;
        bgm.play().catch(()=>{});
    },300);

    if(nameImageMap[name]){
        showSpinImage(nameImageMap[name]);
    }

    for(let i=0;i<30;i++){
        setTimeout(()=>popup(name),i*120);
    }

    setInterval(()=>boom(
        Math.random()*canvas.width,
        Math.random()*canvas.height*0.6
    ),1500);

    setInterval(heartRain, innerWidth < 768 ? 500 : 300);
}
</script>

</body>
</html>
